# Replay Processing Grafana Dashboards
# Two specialized dashboards for replay operations and analytics monitoring
apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-replay-dashboards
  namespace: leetgaming
data:
  # =============================================================================
  # Dashboard 1: Replay Processing Operations
  # Monitor replay file processing, parsing, and analysis pipeline
  # =============================================================================
  replay-processing.json: |
    {
      "annotations": {"list": []},
      "editable": true,
      "fiscalYearStartMonth": 0,
      "graphTooltip": 1,
      "id": null,
      "links": [
        {"asDropdown": false, "icon": "external link", "includeVars": false, "keepTime": true, "tags": [], "targetBlank": false, "title": "Analytics", "type": "link", "url": "/d/replay-analytics"},
        {"asDropdown": false, "icon": "external link", "includeVars": false, "keepTime": true, "tags": [], "targetBlank": false, "title": "Command Center", "type": "link", "url": "/d/esports-command-center"},
        {"asDropdown": false, "icon": "external link", "includeVars": false, "keepTime": true, "tags": [], "targetBlank": false, "title": "Profiling", "type": "link", "url": "/d/pyroscope-profiles"}
      ],
      "liveNow": true,
      "panels": [
        {
          "gridPos": {"h": 2, "w": 24, "x": 0, "y": 0},
          "id": 100,
          "options": {"code": {"language": "plaintext", "showLineNumbers": false, "showMiniMap": false}, "content": "# Replay Processing Operations\n\nMonitor CS2/CSGO replay file processing pipeline: uploads, parsing, event extraction, and analytics generation.", "mode": "markdown"},
          "pluginVersion": "10.2.0",
          "title": "",
          "transparent": true,
          "type": "text"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}, "unit": "short"}, "overrides": []},
          "gridPos": {"h": 4, "w": 4, "x": 0, "y": 2},
          "id": 1,
          "options": {"colorMode": "value", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "auto"},
          "targets": [{"expr": "sum(increase(replay_files_uploaded_total[24h]))", "refId": "A"}],
          "title": "Replays Uploaded (24h)",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "blue", "value": null}]}, "unit": "short"}, "overrides": []},
          "gridPos": {"h": 4, "w": 4, "x": 4, "y": 2},
          "id": 2,
          "options": {"colorMode": "value", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "auto"},
          "targets": [{"expr": "sum(replay_processing_queue_size)", "refId": "A"}],
          "title": "Processing Queue",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}, "unit": "short"}, "overrides": []},
          "gridPos": {"h": 4, "w": 4, "x": 8, "y": 2},
          "id": 3,
          "options": {"colorMode": "value", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "auto"},
          "targets": [{"expr": "sum(increase(replay_files_processed_total{status=\"success\"}[24h]))", "refId": "A"}],
          "title": "Successfully Processed (24h)",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "yellow", "value": 1}, {"color": "red", "value": 5}]}, "unit": "short"}, "overrides": []},
          "gridPos": {"h": 4, "w": 4, "x": 12, "y": 2},
          "id": 4,
          "options": {"colorMode": "value", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "auto"},
          "targets": [{"expr": "sum(increase(replay_files_processed_total{status=\"failed\"}[24h]))", "refId": "A"}],
          "title": "Failed (24h)",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "yellow", "value": 60}, {"color": "red", "value": 180}]}, "unit": "s"}, "overrides": []},
          "gridPos": {"h": 4, "w": 4, "x": 16, "y": 2},
          "id": 5,
          "options": {"colorMode": "value", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "auto"},
          "targets": [{"expr": "histogram_quantile(0.95, sum(rate(replay_processing_duration_seconds_bucket[5m])) by (le))", "refId": "A"}],
          "title": "P95 Processing Time",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}, "unit": "percent"}, "overrides": []},
          "gridPos": {"h": 4, "w": 4, "x": 20, "y": 2},
          "id": 6,
          "options": {"colorMode": "value", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "auto"},
          "targets": [{"expr": "sum(increase(replay_files_processed_total{status=\"success\"}[1h])) / sum(increase(replay_files_processed_total[1h])) * 100", "refId": "A"}],
          "title": "Success Rate (1h)",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 20, "gradientMode": "opacity", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "lineInterpolation": "smooth", "lineWidth": 2, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "never", "spanNulls": false, "stacking": {"group": "A", "mode": "normal"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}, "unit": "short"}, "overrides": []},
          "gridPos": {"h": 8, "w": 12, "x": 0, "y": 6},
          "id": 7,
          "options": {"legend": {"calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom", "showLegend": true}, "tooltip": {"mode": "multi", "sort": "desc"}},
          "targets": [
            {"expr": "sum(rate(replay_files_processed_total[5m])) by (status) * 60", "legendFormat": "{{status}}", "refId": "A"}
          ],
          "title": "Replay Processing Rate (per minute)",
          "type": "timeseries"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 10, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "lineInterpolation": "smooth", "lineWidth": 2, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "never", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}, "unit": "s"}, "overrides": []},
          "gridPos": {"h": 8, "w": 12, "x": 12, "y": 6},
          "id": 8,
          "options": {"legend": {"calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom", "showLegend": true}, "tooltip": {"mode": "multi", "sort": "desc"}},
          "targets": [
            {"expr": "histogram_quantile(0.50, sum(rate(replay_processing_duration_seconds_bucket[5m])) by (le, stage))", "legendFormat": "p50 {{stage}}", "refId": "A"},
            {"expr": "histogram_quantile(0.95, sum(rate(replay_processing_duration_seconds_bucket[5m])) by (le, stage))", "legendFormat": "p95 {{stage}}", "refId": "B"},
            {"expr": "histogram_quantile(0.99, sum(rate(replay_processing_duration_seconds_bucket[5m])) by (le, stage))", "legendFormat": "p99 {{stage}}", "refId": "C"}
          ],
          "title": "Processing Duration by Stage",
          "type": "timeseries"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "bars", "fillOpacity": 80, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "never", "spanNulls": false, "stacking": {"group": "A", "mode": "normal"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}, "unit": "short"}, "overrides": []},
          "gridPos": {"h": 8, "w": 12, "x": 0, "y": 14},
          "id": 9,
          "options": {"legend": {"calcs": ["sum"], "displayMode": "table", "placement": "bottom", "showLegend": true}, "tooltip": {"mode": "multi", "sort": "desc"}},
          "targets": [
            {"expr": "sum(increase(replay_events_extracted_total[1h])) by (event_type)", "legendFormat": "{{event_type}}", "refId": "A"}
          ],
          "title": "Events Extracted by Type (1h)",
          "type": "timeseries"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 10, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "lineInterpolation": "smooth", "lineWidth": 2, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "never", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}, "unit": "bytes"}, "overrides": []},
          "gridPos": {"h": 8, "w": 12, "x": 12, "y": 14},
          "id": 10,
          "options": {"legend": {"calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom", "showLegend": true}, "tooltip": {"mode": "multi", "sort": "desc"}},
          "targets": [
            {"expr": "histogram_quantile(0.50, sum(rate(replay_file_size_bytes_bucket[5m])) by (le))", "legendFormat": "p50 size", "refId": "A"},
            {"expr": "histogram_quantile(0.95, sum(rate(replay_file_size_bytes_bucket[5m])) by (le))", "legendFormat": "p95 size", "refId": "B"},
            {"expr": "avg(replay_file_size_bytes_sum / replay_file_size_bytes_count)", "legendFormat": "avg size", "refId": "C"}
          ],
          "title": "Replay File Sizes",
          "type": "timeseries"
        },
        {
          "gridPos": {"h": 2, "w": 24, "x": 0, "y": 22},
          "id": 101,
          "options": {"code": {"language": "plaintext", "showLineNumbers": false, "showMiniMap": false}, "content": "## Parser Performance", "mode": "markdown"},
          "pluginVersion": "10.2.0",
          "title": "",
          "transparent": true,
          "type": "text"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 10, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "lineInterpolation": "smooth", "lineWidth": 2, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "never", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}, "unit": "short"}, "overrides": []},
          "gridPos": {"h": 8, "w": 8, "x": 0, "y": 24},
          "id": 11,
          "options": {"legend": {"calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom", "showLegend": true}, "tooltip": {"mode": "multi", "sort": "desc"}},
          "targets": [
            {"expr": "sum(rate(replay_parser_ticks_processed_total[5m])) by (parser)", "legendFormat": "{{parser}}", "refId": "A"}
          ],
          "title": "Ticks Processed per Second",
          "type": "timeseries"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 10, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "lineInterpolation": "smooth", "lineWidth": 2, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "never", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}, "unit": "bytes"}, "overrides": []},
          "gridPos": {"h": 8, "w": 8, "x": 8, "y": 24},
          "id": 12,
          "options": {"legend": {"calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom", "showLegend": true}, "tooltip": {"mode": "multi", "sort": "desc"}},
          "targets": [
            {"expr": "process_resident_memory_bytes{job=~\".*replay.*\"}", "legendFormat": "{{pod}}", "refId": "A"}
          ],
          "title": "Parser Memory Usage",
          "type": "timeseries"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 10, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "lineInterpolation": "smooth", "lineWidth": 2, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "never", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}, "unit": "percent"}, "overrides": []},
          "gridPos": {"h": 8, "w": 8, "x": 16, "y": 24},
          "id": 13,
          "options": {"legend": {"calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom", "showLegend": true}, "tooltip": {"mode": "multi", "sort": "desc"}},
          "targets": [
            {"expr": "rate(process_cpu_seconds_total{job=~\".*replay.*\"}[5m]) * 100", "legendFormat": "{{pod}}", "refId": "A"}
          ],
          "title": "Parser CPU Usage",
          "type": "timeseries"
        },
        {
          "gridPos": {"h": 2, "w": 24, "x": 0, "y": 32},
          "id": 102,
          "options": {"code": {"language": "plaintext", "showLineNumbers": false, "showMiniMap": false}, "content": "## Storage & Data Pipeline", "mode": "markdown"},
          "pluginVersion": "10.2.0",
          "title": "",
          "transparent": true,
          "type": "text"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 10, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "lineInterpolation": "smooth", "lineWidth": 2, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "never", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}, "unit": "ops"}, "overrides": []},
          "gridPos": {"h": 8, "w": 12, "x": 0, "y": 34},
          "id": 14,
          "options": {"legend": {"calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom", "showLegend": true}, "tooltip": {"mode": "multi", "sort": "desc"}},
          "targets": [
            {"expr": "sum(rate(replay_storage_writes_total[5m])) by (storage_type)", "legendFormat": "{{storage_type}}", "refId": "A"}
          ],
          "title": "Storage Writes per Second",
          "type": "timeseries"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 10, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "lineInterpolation": "smooth", "lineWidth": 2, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "never", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}, "unit": "ops"}, "overrides": []},
          "gridPos": {"h": 8, "w": 12, "x": 12, "y": 34},
          "id": 15,
          "options": {"legend": {"calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom", "showLegend": true}, "tooltip": {"mode": "multi", "sort": "desc"}},
          "targets": [
            {"expr": "sum(rate(esports_kafka_messages_produced_total{topic=~\".*replay.*\"}[5m])) by (topic)", "legendFormat": "{{topic}}", "refId": "A"}
          ],
          "title": "Kafka Replay Messages",
          "type": "timeseries"
        }
      ],
      "refresh": "10s",
      "schemaVersion": 38,
      "style": "dark",
      "tags": ["leetgaming", "replay", "processing", "demo"],
      "templating": {"list": []},
      "time": {"from": "now-1h", "to": "now"},
      "timepicker": {},
      "timezone": "",
      "title": "Replay Processing",
      "uid": "replay-processing",
      "version": 1,
      "weekStart": ""
    }

  # =============================================================================
  # Dashboard 2: Replay Analytics
  # Monitor replay analytics data: trajectories, heatmaps, player positioning
  # =============================================================================
  replay-analytics.json: |
    {
      "annotations": {"list": []},
      "editable": true,
      "fiscalYearStartMonth": 0,
      "graphTooltip": 1,
      "id": null,
      "links": [
        {"asDropdown": false, "icon": "external link", "includeVars": false, "keepTime": true, "tags": [], "targetBlank": false, "title": "Processing", "type": "link", "url": "/d/replay-processing"},
        {"asDropdown": false, "icon": "external link", "includeVars": false, "keepTime": true, "tags": [], "targetBlank": false, "title": "Command Center", "type": "link", "url": "/d/esports-command-center"},
        {"asDropdown": false, "icon": "external link", "includeVars": false, "keepTime": true, "tags": [], "targetBlank": false, "title": "Profiling", "type": "link", "url": "/d/pyroscope-profiles"}
      ],
      "liveNow": true,
      "panels": [
        {
          "gridPos": {"h": 2, "w": 24, "x": 0, "y": 0},
          "id": 100,
          "options": {"code": {"language": "plaintext", "showLineNumbers": false, "showMiniMap": false}, "content": "# Replay Analytics Dashboard\n\nMonitor analytics generation from replay data: trajectories, heatmaps, positioning stats, and game event analysis.", "mode": "markdown"},
          "pluginVersion": "10.2.0",
          "title": "",
          "transparent": true,
          "type": "text"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}, "unit": "short"}, "overrides": []},
          "gridPos": {"h": 4, "w": 4, "x": 0, "y": 2},
          "id": 1,
          "options": {"colorMode": "value", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "auto"},
          "targets": [{"expr": "sum(increase(replay_analytics_trajectory_generated_total[24h]))", "refId": "A"}],
          "title": "Trajectories Generated (24h)",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "orange", "value": null}]}, "unit": "short"}, "overrides": []},
          "gridPos": {"h": 4, "w": 4, "x": 4, "y": 2},
          "id": 2,
          "options": {"colorMode": "value", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "auto"},
          "targets": [{"expr": "sum(increase(replay_analytics_heatmap_generated_total[24h]))", "refId": "A"}],
          "title": "Heatmaps Generated (24h)",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "purple", "value": null}]}, "unit": "short"}, "overrides": []},
          "gridPos": {"h": 4, "w": 4, "x": 8, "y": 2},
          "id": 3,
          "options": {"colorMode": "value", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "auto"},
          "targets": [{"expr": "sum(increase(replay_analytics_positioning_stats_generated_total[24h]))", "refId": "A"}],
          "title": "Positioning Stats (24h)",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "blue", "value": null}]}, "unit": "short"}, "overrides": []},
          "gridPos": {"h": 4, "w": 4, "x": 12, "y": 2},
          "id": 4,
          "options": {"colorMode": "value", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "auto"},
          "targets": [{"expr": "sum(increase(replay_analytics_api_requests_total[1h]))", "refId": "A"}],
          "title": "Analytics API Requests (1h)",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "yellow", "value": 100}, {"color": "red", "value": 500}]}, "unit": "ms"}, "overrides": []},
          "gridPos": {"h": 4, "w": 4, "x": 16, "y": 2},
          "id": 5,
          "options": {"colorMode": "value", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "auto"},
          "targets": [{"expr": "histogram_quantile(0.95, sum(rate(replay_analytics_api_latency_seconds_bucket[5m])) by (le)) * 1000", "refId": "A"}],
          "title": "P95 API Latency",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}, "unit": "short"}, "overrides": []},
          "gridPos": {"h": 4, "w": 4, "x": 20, "y": 2},
          "id": 6,
          "options": {"colorMode": "value", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "auto"},
          "targets": [{"expr": "sum(replay_analytics_cache_size)", "refId": "A"}],
          "title": "Analytics Cache Size",
          "type": "stat"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 20, "gradientMode": "opacity", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "lineInterpolation": "smooth", "lineWidth": 2, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "never", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}, "unit": "short"}, "overrides": []},
          "gridPos": {"h": 8, "w": 12, "x": 0, "y": 6},
          "id": 7,
          "options": {"legend": {"calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom", "showLegend": true}, "tooltip": {"mode": "multi", "sort": "desc"}},
          "targets": [
            {"expr": "sum(rate(replay_analytics_api_requests_total[5m])) by (endpoint) * 60", "legendFormat": "{{endpoint}}", "refId": "A"}
          ],
          "title": "Analytics API Requests (per minute)",
          "type": "timeseries"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 10, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "lineInterpolation": "smooth", "lineWidth": 2, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "never", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}, "unit": "ms"}, "overrides": []},
          "gridPos": {"h": 8, "w": 12, "x": 12, "y": 6},
          "id": 8,
          "options": {"legend": {"calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom", "showLegend": true}, "tooltip": {"mode": "multi", "sort": "desc"}},
          "targets": [
            {"expr": "histogram_quantile(0.50, sum(rate(replay_analytics_api_latency_seconds_bucket[5m])) by (le, endpoint)) * 1000", "legendFormat": "p50 {{endpoint}}", "refId": "A"},
            {"expr": "histogram_quantile(0.95, sum(rate(replay_analytics_api_latency_seconds_bucket[5m])) by (le, endpoint)) * 1000", "legendFormat": "p95 {{endpoint}}", "refId": "B"}
          ],
          "title": "Analytics API Latency by Endpoint",
          "type": "timeseries"
        },
        {
          "gridPos": {"h": 2, "w": 24, "x": 0, "y": 14},
          "id": 101,
          "options": {"code": {"language": "plaintext", "showLineNumbers": false, "showMiniMap": false}, "content": "## Data Generation Metrics", "mode": "markdown"},
          "pluginVersion": "10.2.0",
          "title": "",
          "transparent": true,
          "type": "text"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "bars", "fillOpacity": 80, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "never", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}, "unit": "short"}, "overrides": []},
          "gridPos": {"h": 8, "w": 8, "x": 0, "y": 16},
          "id": 9,
          "options": {"legend": {"calcs": ["sum"], "displayMode": "table", "placement": "bottom", "showLegend": true}, "tooltip": {"mode": "multi", "sort": "desc"}},
          "targets": [
            {"expr": "sum(increase(replay_analytics_trajectory_points_total[1h])) by (map)", "legendFormat": "{{map}}", "refId": "A"}
          ],
          "title": "Trajectory Points by Map (1h)",
          "type": "timeseries"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "bars", "fillOpacity": 80, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "never", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}, "unit": "short"}, "overrides": []},
          "gridPos": {"h": 8, "w": 8, "x": 8, "y": 16},
          "id": 10,
          "options": {"legend": {"calcs": ["sum"], "displayMode": "table", "placement": "bottom", "showLegend": true}, "tooltip": {"mode": "multi", "sort": "desc"}},
          "targets": [
            {"expr": "sum(increase(replay_analytics_heatmap_cells_total[1h])) by (map)", "legendFormat": "{{map}}", "refId": "A"}
          ],
          "title": "Heatmap Cells by Map (1h)",
          "type": "timeseries"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 10, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "lineInterpolation": "smooth", "lineWidth": 2, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "never", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}, "unit": "percent"}, "overrides": []},
          "gridPos": {"h": 8, "w": 8, "x": 16, "y": 16},
          "id": 11,
          "options": {"legend": {"calcs": ["mean"], "displayMode": "table", "placement": "bottom", "showLegend": true}, "tooltip": {"mode": "multi", "sort": "desc"}},
          "targets": [
            {"expr": "sum(replay_analytics_cache_hits_total) / (sum(replay_analytics_cache_hits_total) + sum(replay_analytics_cache_misses_total)) * 100", "legendFormat": "Cache Hit Rate", "refId": "A"}
          ],
          "title": "Analytics Cache Hit Rate",
          "type": "timeseries"
        },
        {
          "gridPos": {"h": 2, "w": 24, "x": 0, "y": 24},
          "id": 102,
          "options": {"code": {"language": "plaintext", "showLineNumbers": false, "showMiniMap": false}, "content": "## Game Event Analysis", "mode": "markdown"},
          "pluginVersion": "10.2.0",
          "title": "",
          "transparent": true,
          "type": "text"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "bars", "fillOpacity": 80, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "never", "spanNulls": false, "stacking": {"group": "A", "mode": "normal"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}, "unit": "short"}, "overrides": []},
          "gridPos": {"h": 8, "w": 12, "x": 0, "y": 26},
          "id": 12,
          "options": {"legend": {"calcs": ["sum"], "displayMode": "table", "placement": "right", "showLegend": true}, "tooltip": {"mode": "multi", "sort": "desc"}},
          "targets": [
            {"expr": "sum(increase(replay_game_events_analyzed_total[1h])) by (event_type)", "legendFormat": "{{event_type}}", "refId": "A"}
          ],
          "title": "Game Events Analyzed (1h)",
          "type": "timeseries"
        },
        {
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 10, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "lineInterpolation": "smooth", "lineWidth": 2, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "never", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}, "unit": "short"}, "overrides": []},
          "gridPos": {"h": 8, "w": 12, "x": 12, "y": 26},
          "id": 13,
          "options": {"legend": {"calcs": ["mean", "sum"], "displayMode": "table", "placement": "right", "showLegend": true}, "tooltip": {"mode": "multi", "sort": "desc"}},
          "targets": [
            {"expr": "sum(increase(replay_kill_analysis_total[1h])) by (weapon_type)", "legendFormat": "{{weapon_type}}", "refId": "A"}
          ],
          "title": "Kill Analysis by Weapon Type (1h)",
          "type": "timeseries"
        }
      ],
      "refresh": "10s",
      "schemaVersion": 38,
      "style": "dark",
      "tags": ["leetgaming", "replay", "analytics", "trajectory", "heatmap"],
      "templating": {"list": []},
      "time": {"from": "now-1h", "to": "now"},
      "timepicker": {},
      "timezone": "",
      "title": "Replay Analytics",
      "uid": "replay-analytics",
      "version": 1,
      "weekStart": ""
    }
